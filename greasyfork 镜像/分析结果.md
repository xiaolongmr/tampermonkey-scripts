# Greasy Fork 镜像站更新机制分析

## 1. 缓存配置

脚本使用了缓存机制，配置如下：
- **缓存有效期**: 3600秒 (1小时)
- **缓存开关**: 启用
- **后台同步**: 支持
- **重试延迟**: 5000毫秒 (5秒)

## 2. .meta.js 文件特殊处理

对于 `https://gf.z-l.top/scripts/554301/%E8%8A%B1%E7%93%A3%22%E5%8E%BB%22%E6%B0%B4%E5%8D%B0.meta.js` 这样的文件：

- **上游域名**: 使用 `UPDATE_DOMAIN` (`update.greasyfork.org`) 而非主域名
- **缓存策略**: 与其他静态资源相同，缓存1小时
- **更新触发**: 缓存过期后自动在后台异步更新

## 3. 更新机制详解

### 正常请求流程
1. 用户请求 `.meta.js` 文件
2. 检查缓存是否存在且未过期
3. 存在且未过期：直接返回缓存内容
4. 不存在或已过期：从上游获取最新内容并更新缓存

### 缓存过期处理
- 缓存有效期为1小时
- 过期后会在后台持续尝试同步最新内容
- 同步成功后自动更新缓存
- 用户无需等待即可获取最新内容

### 手动刷新
用户可以通过添加 `?refresh=true` 参数强制刷新：
```
https://gf.z-l.top/scripts/554301/%E8%8A%B1%E7%93%A3%22%E5%8E%BB%22%E6%B0%B4%E5%8D%B0.meta.js?refresh=true
```

## 4. 结论

`https://gf.z-l.top/scripts/554301/%E8%8A%B1%E7%93%A3%22%E5%8E%BB%22%E6%B0%B4%E5%8D%B0.meta.js` 页面会：

✅ **定时更新**：每1小时自动更新一次
✅ **后台同步**：缓存过期后在后台异步更新
✅ **手动刷新**：支持通过参数强制刷新

**注意**：更新是基于上游 Greasy Fork 服务器的内容变更，镜像站本身不生成或修改脚本内容。