<!doctype html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="description" content="DIY可视化提供技术支持" />
  <script src="https://cdn.tailwindcss.com"></script>

</head>

<body>
  <!-- 去水印方案下拉列表组件 -->
  <div class="relative w-64 mt-4 ml-4">
    <!-- 下拉按钮 -->
    <button id="dropdown-button"
      class="w-full bg-white border border-gray-200 rounded-lg py-3 px-4 text-left shadow-sm hover:border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 transition duration-200 flex items-center justify-between">
      <span id="selected-option" class="font-medium text-gray-900">LauZz方案 (默认)</span>
      <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-gray-500 transition-transform duration-200 chevron-icon" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
      </svg>
    </button>

    <!-- 下拉菜单 -->
    <div id="dropdown-menu"
      class="absolute left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-10 hidden" style="
    border-radius: 12px;
">
      <ul class="py-1" style="
    padding: 10px;
">
        <li>
          <button
            class="dropdown-option w-full text-left px-4 py-3 hover:bg-gray-100 transition-colors duration-150 flex items-center justify-between"
            data-value="lauzz" style="
    border-radius: 8px;
">
            <span>LauZz方案 (默认)</span>
            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-blue-500 check-icon" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
            </svg>
          </button>
        </li>
        <li>
          <button
            class="dropdown-option w-full text-left px-4 py-3 hover:bg-gray-100 transition-colors duration-150 flex items-center justify-between"
            data-value="aichimo" style="
    border-radius: 8px;
">
            <span>拼接方案（爱吃馍）</span>
            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-blue-500 hidden check-icon" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
            </svg>
          </button>
        </li>
      </ul>
    </div>
  </div>

  <script>
    // 下拉菜单交互逻辑
    document.addEventListener('DOMContentLoaded', function () {
      const dropdownButton = document.getElementById('dropdown-button');
      const dropdownMenu = document.getElementById('dropdown-menu');
      const selectedOption = document.getElementById('selected-option');
      const options = document.querySelectorAll('.dropdown-option');
      const chevronIcon = dropdownButton.querySelector('.chevron-icon');

      // 检测Tampermonkey API是否可用
      const hasTampermonkey = typeof GM_getValue !== 'undefined' && typeof GM_setValue !== 'undefined';

      // 从存储加载保存的选项
      const savedOption = hasTampermonkey ? GM_getValue('watermark_removal_option', 'lauzz') : localStorage.getItem('watermark_removal_option') || 'lauzz';
      updateSelectedOption(savedOption);

      // 切换下拉菜单显示/隐藏
      dropdownButton.addEventListener('click', function () {
        dropdownMenu.classList.toggle('hidden');
        chevronIcon.classList.toggle('rotate-180');
      });

      // 点击选项时更新选择
      options.forEach(option => {
        option.addEventListener('click', function () {
          const value = this.getAttribute('data-value');
          updateSelectedOption(value);
          // 保存选择到存储
          if (hasTampermonkey) {
            GM_setValue('watermark_removal_option', value);
          } else {
            localStorage.setItem('watermark_removal_option', value);
          }
          // 关闭下拉菜单
          dropdownMenu.classList.add('hidden');
          chevronIcon.classList.remove('rotate-180');
        });
      });

      // 点击页面其他地方关闭下拉菜单
      document.addEventListener('click', function (event) {
        if (!dropdownButton.contains(event.target) && !dropdownMenu.contains(event.target)) {
          dropdownMenu.classList.add('hidden');
          chevronIcon.classList.remove('rotate-180');
        }
      });

      // 更新选中选项的显示
      function updateSelectedOption(value) {
        selectedOption.textContent = value === 'lauzz' ? 'LauZz方案 (默认)' : '拼接方案（爱吃馍）';

        // 更新选中状态图标
        options.forEach(option => {
          const optionValue = option.getAttribute('data-value');
          const checkIcon = option.querySelector('.check-icon');
          if (optionValue === value) {
            checkIcon.classList.remove('hidden');
          } else {
            checkIcon.classList.add('hidden');
          }
        });
      }
    });
  </script>
</body>

</html>