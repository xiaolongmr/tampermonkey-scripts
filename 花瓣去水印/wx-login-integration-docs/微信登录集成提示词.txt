# 微信登录系统集成指南 - 给另一个AI的提示词

## 任务概述
请帮助我将微信登录系统集成到当前项目中。我已经准备好了完整的集成文档和示例代码。

## 文档位置
集成所需的全部文件都位于 `wx-login-integration-docs` 文件夹中，请先查看该文件夹内容。

## 必须执行的步骤

### 步骤1：引入核心集成文件
将 `wechat-login.js` 文件添加到项目中，并在需要使用登录功能的页面中通过 script 标签引入。

### 步骤2：初始化微信登录实例
在页面加载时，初始化微信登录实例，确保使用正确的域名：
```javascript
// 在页面加载完成后初始化
window.addEventListener('DOMContentLoaded', () => {
  // 初始化微信登录实例，使用已部署的服务域名
  window.WechatLogin.init({
    baseUrl: 'https://wx.z-l.top', // 微信登录服务的域名，已配置完成
    // 可选的回调函数
    onLoginSuccess: (userInfo) => {
      console.log('登录成功，用户信息：', userInfo);
      // 处理登录成功后的逻辑
    },
    onLoginFailure: (error) => {
      console.error('登录失败：', error);
      // 处理登录失败后的逻辑
    }
  });
});
```

### 步骤3：添加登录组件到页面
参考 `wechat-login-component.html` 文件，将微信登录组件添加到需要登录的页面中。

### 步骤4：保护需要登录的页面
参考 `protected-page-example.html` 文件，实现页面访问前的登录检查：
1. 在页面加载时检查用户是否已登录
2. 如果未登录，重定向到登录页面或显示登录组件
3. 确保在获取敏感数据前验证用户身份

### 步骤5：获取用户信息
登录成功后，可以通过以下方法获取用户信息：
```javascript
// 获取当前登录用户信息
const userInfo = await window.WechatLogin.getUserInfo();
if (userInfo) {
  console.log('用户已登录：', userInfo);
}
```

### 步骤6：实现退出登录功能
为用户提供退出登录选项：
```javascript
// 退出登录
window.WechatLogin.logout().then(() => {
  console.log('退出登录成功');
  // 处理退出登录后的逻辑，如重定向到登录页面
});
```

## 重要注意事项

1. **安全域名配置**：确保当前项目的域名已在微信公众号平台的安全域名列表中配置，否则可能无法正常完成登录流程。

2. **API调用**：所有与微信登录相关的API调用都指向已部署的服务 `https://wx.z-l.top`，无需在当前项目中重新实现微信授权逻辑。

3. **安全最佳实践**：
   - 不要在前端存储敏感的用户凭证
   - 定期检查用户登录状态的有效性
   - 对需要保护的API端点实施服务端验证

4. **自定义配置**：如果需要自定义登录按钮样式或登录成功后的行为，可以修改相应的回调函数和组件样式。

## 参考文档
完整的部署和集成说明请参考 `DEPLOYMENT.md` 文件。

请按照上述步骤完成集成，并确保在实现过程中严格遵循安全最佳实践。如有任何问题，请参考示例文件或文档。